[INF]  User profile is available. Using 'C:\Users\dell\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. 
[INF]  Now listening on: https://localhost:7247 
[INF]  Now listening on: http://localhost:5247 
[INF]  Application started. Press Ctrl+C to shut down. 
[INF]  Hosting environment: Development 
[INF]  Content root path: C:\Users\dell\Desktop\RailWayCleanArchitecture\RailWayTractingSystem\RailWayWebAPI\ 
[INF]  User profile is available. Using 'C:\Users\dell\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. 
[INF]  Now listening on: https://localhost:7247 
[INF]  Now listening on: http://localhost:5247 
[INF]  Application started. Press Ctrl+C to shut down. 
[INF]  Hosting environment: Development 
[INF]  Content root path: C:\Users\dell\Desktop\RailWayCleanArchitecture\RailWayTractingSystem\RailWayWebAPI\ 
[INF]  Request starting HTTP/2 GET https://localhost:7247/swagger/index.html - - 
[INF]  Request starting HTTP/2 GET https://localhost:7247/_framework/aspnetcore-browser-refresh.js - - 
[INF]  Request finished HTTP/2 GET https://localhost:7247/swagger/index.html - - - 200 - text/html;charset=utf-8 7543.4540ms 
[INF]  Request finished HTTP/2 GET https://localhost:7247/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 313.9974ms 
[INF]  Request starting HTTP/2 GET https://localhost:7247/swagger/v1/swagger.json - - 
[INF]  Request finished HTTP/2 GET https://localhost:7247/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 1446.1889ms 
[INF]  Request starting HTTP/2 POST https://localhost:7247/api/Staff/Login application/json 47 
[INF]  CORS policy execution successful. 
[INF]  Executing endpoint 'RailWayWebAPI.Controllers.StaffController.Login (RailWayWebAPI)' 
[INF]  Route matched with {action = "Login", controller = "Staff"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(RailWayAppLibrary.Queries.LoginStaff) on controller RailWayWebAPI.Controllers.StaffController (RailWayWebAPI). 
[INF]  Entity Framework Core 6.0.5 initialized 'RailWayDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.5' with options: None 
[ERR]  An error occurred using the connection to database 'main' on server './/RailWaySystem.db'. 
[ERR]  An exception occurred while iterating over the results of a query for context type 'RailWayInfrastructureLibrary.Data.RailWayDbContext'.
System.Exception: You need to call SQLitePCL.raw.SetProvider().  If you are using a bundle package, this is done by calling SQLitePCL.Batteries.Init().
   at SQLitePCL.raw.get_Provider()
   at SQLitePCL.raw.sqlite3_open_v2(utf8z filename, sqlite3& db, Int32 flags, utf8z vfs)
   at SQLitePCL.raw.sqlite3_open_v2(String filename, sqlite3& db, Int32 flags, String vfs)
   at Microsoft.Data.Sqlite.SqliteConnectionInternal..ctor(SqliteConnectionStringBuilder connectionOptions, SqliteConnectionPool pool)
   at Microsoft.Data.Sqlite.SqliteConnectionPool.GetConnection()
   at Microsoft.Data.Sqlite.SqliteConnectionFactory.GetConnection(SqliteConnection outerConnection)
   at Microsoft.Data.Sqlite.SqliteConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__19_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Storage.NonRetryingExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext() 
System.Exception: You need to call SQLitePCL.raw.SetProvider().  If you are using a bundle package, this is done by calling SQLitePCL.Batteries.Init().
   at SQLitePCL.raw.get_Provider()
   at SQLitePCL.raw.sqlite3_open_v2(utf8z filename, sqlite3& db, Int32 flags, utf8z vfs)
   at SQLitePCL.raw.sqlite3_open_v2(String filename, sqlite3& db, Int32 flags, String vfs)
   at Microsoft.Data.Sqlite.SqliteConnectionInternal..ctor(SqliteConnectionStringBuilder connectionOptions, SqliteConnectionPool pool)
   at Microsoft.Data.Sqlite.SqliteConnectionPool.GetConnection()
   at Microsoft.Data.Sqlite.SqliteConnectionFactory.GetConnection(SqliteConnection outerConnection)
   at Microsoft.Data.Sqlite.SqliteConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__19_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Storage.NonRetryingExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
[INF]  User profile is available. Using 'C:\Users\dell\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. 
[INF]  Now listening on: https://localhost:7247 
[INF]  Now listening on: http://localhost:5247 
[INF]  Application started. Press Ctrl+C to shut down. 
[INF]  Hosting environment: Development 
[INF]  Content root path: C:\Users\dell\Desktop\RailWayCleanArchitecture\RailWayTractingSystem\RailWayWebAPI\ 
[INF]  Request starting HTTP/2 GET https://localhost:7247/swagger/index.html - - 
[INF]  Request finished HTTP/2 GET https://localhost:7247/swagger/index.html - - - 200 - text/html;charset=utf-8 1032.6647ms 
[INF]  Request starting HTTP/2 GET https://localhost:7247/_framework/aspnetcore-browser-refresh.js - - 
[INF]  Request finished HTTP/2 GET https://localhost:7247/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 3.4258ms 
[INF]  Request starting HTTP/2 GET https://localhost:7247/swagger/v1/swagger.json - - 
[INF]  Request finished HTTP/2 GET https://localhost:7247/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 370.4203ms 
[INF]  Request starting HTTP/2 POST https://localhost:7247/api/Passenger application/json 225 
[INF]  CORS policy execution successful. 
[INF]  Executing endpoint 'RailWayWebAPI.Controllers.PassengerController.CreatePassenger (RailWayWebAPI)' 
[INF]  Route matched with {action = "CreatePassenger", controller = "Passenger"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePassenger(RailWayAppLibrary.Commands.CreatePassenger) on controller RailWayWebAPI.Controllers.PassengerController (RailWayWebAPI). 
[INF]  Entity Framework Core 6.0.5 initialized 'RailWayDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.5' with options: None 
[ERR]  An error occurred using the connection to database 'main' on server './/RailWaySystem.db'. 
[ERR]  An exception occurred while iterating over the results of a query for context type 'RailWayInfrastructureLibrary.Data.RailWayDbContext'.
System.Exception: You need to call SQLitePCL.raw.SetProvider().  If you are using a bundle package, this is done by calling SQLitePCL.Batteries.Init().
   at SQLitePCL.raw.get_Provider()
   at SQLitePCL.raw.sqlite3_open_v2(utf8z filename, sqlite3& db, Int32 flags, utf8z vfs)
   at SQLitePCL.raw.sqlite3_open_v2(String filename, sqlite3& db, Int32 flags, String vfs)
   at Microsoft.Data.Sqlite.SqliteConnectionInternal..ctor(SqliteConnectionStringBuilder connectionOptions, SqliteConnectionPool pool)
   at Microsoft.Data.Sqlite.SqliteConnectionPool.GetConnection()
   at Microsoft.Data.Sqlite.SqliteConnectionFactory.GetConnection(SqliteConnection outerConnection)
   at Microsoft.Data.Sqlite.SqliteConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__19_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Storage.NonRetryingExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext() 
System.Exception: You need to call SQLitePCL.raw.SetProvider().  If you are using a bundle package, this is done by calling SQLitePCL.Batteries.Init().
   at SQLitePCL.raw.get_Provider()
   at SQLitePCL.raw.sqlite3_open_v2(utf8z filename, sqlite3& db, Int32 flags, utf8z vfs)
   at SQLitePCL.raw.sqlite3_open_v2(String filename, sqlite3& db, Int32 flags, String vfs)
   at Microsoft.Data.Sqlite.SqliteConnectionInternal..ctor(SqliteConnectionStringBuilder connectionOptions, SqliteConnectionPool pool)
   at Microsoft.Data.Sqlite.SqliteConnectionPool.GetConnection()
   at Microsoft.Data.Sqlite.SqliteConnectionFactory.GetConnection(SqliteConnection outerConnection)
   at Microsoft.Data.Sqlite.SqliteConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__19_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Storage.NonRetryingExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
[INF]  Executed action RailWayWebAPI.Controllers.PassengerController.CreatePassenger (RailWayWebAPI) in 4964.7659ms 
[INF]  Executed endpoint 'RailWayWebAPI.Controllers.PassengerController.CreatePassenger (RailWayWebAPI)' 
[ERR]  Something went wrong System.Exception: You need to call SQLitePCL.raw.SetProvider().  If you are using a bundle package, this is done by calling SQLitePCL.Batteries.Init().
   at SQLitePCL.raw.get_Provider()
   at SQLitePCL.raw.sqlite3_open_v2(utf8z filename, sqlite3& db, Int32 flags, utf8z vfs)
   at SQLitePCL.raw.sqlite3_open_v2(String filename, sqlite3& db, Int32 flags, String vfs)
   at Microsoft.Data.Sqlite.SqliteConnectionInternal..ctor(SqliteConnectionStringBuilder connectionOptions, SqliteConnectionPool pool)
   at Microsoft.Data.Sqlite.SqliteConnectionPool.GetConnection()
   at Microsoft.Data.Sqlite.SqliteConnectionFactory.GetConnection(SqliteConnection outerConnection)
   at Microsoft.Data.Sqlite.SqliteConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__19_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Storage.NonRetryingExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetSingle[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method21(Closure , QueryContext )
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.Any[TSource](IQueryable`1 source)
   at RailWayInfrastructureLibrary.Repository.Command.Base.CommandRepo`1.IfExist(Expression`1 predicate) in C:\Users\dell\Desktop\RailWayCleanArchitecture\RailWayTractingSystem\RailWayInfrastructureLibrary\Repository\Command\Base\CommandRepo.cs:line 40
   at RailWayAppLibrary.Handlers.CommandHandlers.CreatePassengerHandler.Handle(CreatePassenger request, CancellationToken cancellationToken) in C:\Users\dell\Desktop\RailWayCleanArchitecture\RailWayTractingSystem\RailWayApp\Commands\CreatePassenger\CreatePassengerHandler.cs:line 27
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at RailWayWebAPI.Controllers.PassengerController.CreatePassenger(CreatePassenger passenger) in C:\Users\dell\Desktop\RailWayCleanArchitecture\RailWayTractingSystem\RailWayWebAPI\Controllers\PassengerController.cs:line 25
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at RailWayWebAPI.CustomMiddleware.ExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\dell\Desktop\RailWayCleanArchitecture\RailWayTractingSystem\RailWayWebAPI\CustomMiddleware\ExceptionHandlerMiddleware.cs:line 20 
[INF]  Request finished HTTP/2 POST https://localhost:7247/api/Passenger application/json 225 - 500 - - 6138.0233ms 
[INF]  Entity Framework Core 6.0.5 initialized 'RailWayDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.5' with options: None 
[INF]  Entity Framework Core 6.0.5 initialized 'RailWayDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.5' with options: None 
[INF]  Entity Framework Core 6.0.5 initialized 'RailWayDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.5' with options: None 
[INF]  Entity Framework Core 6.0.5 initialized 'RailWayDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.5' with options: None 
[INF]  Entity Framework Core 6.0.5 initialized 'RailWayDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.5' with options: None 
[INF]  Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table'; 
[INF]  Executed DbCommand (155ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
); 
[INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table'; 
[INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId"; 
[INF]  Applying migration '20220713174731_InitialMigration'. 
[INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Passengers" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Passengers" PRIMARY KEY,
    "BloodGroup" INTEGER NULL,
    "NOK_PhoneNo" TEXT NOT NULL,
    "NOK_Name" TEXT NOT NULL,
    "NOK_Address" TEXT NOT NULL,
    "LastModifiedDate" TEXT NOT NULL,
    "CreatedDate" TEXT NOT NULL,
    "Name" TEXT NOT NULL,
    "Gender" INTEGER NOT NULL,
    "Address" TEXT NOT NULL,
    "PhoneNo" TEXT NOT NULL,
    "Email" TEXT NOT NULL,
    "PasswordHash" BLOB NOT NULL,
    "PasswordSalt" BLOB NOT NULL,
    "IsLock" INTEGER NOT NULL,
    "NTry" INTEGER NOT NULL,
    "LastLogin" TEXT NOT NULL,
    "RefreshToken" TEXT NULL,
    "TokenCreated" TEXT NOT NULL,
    "TokenExpires" TEXT NOT NULL
); 
[INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Staffs" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Staffs" PRIMARY KEY,
    "StaffId" TEXT NOT NULL,
    "Role" TEXT NOT NULL,
    "LastModifiedDate" TEXT NOT NULL,
    "CreatedDate" TEXT NOT NULL,
    "Name" TEXT NOT NULL,
    "Gender" INTEGER NOT NULL,
    "Address" TEXT NOT NULL,
    "PhoneNo" TEXT NOT NULL,
    "Email" TEXT NOT NULL,
    "PasswordHash" BLOB NOT NULL,
    "PasswordSalt" BLOB NOT NULL,
    "IsLock" INTEGER NOT NULL,
    "NTry" INTEGER NOT NULL,
    "LastLogin" TEXT NOT NULL,
    "RefreshToken" TEXT NULL,
    "TokenCreated" TEXT NOT NULL,
    "TokenExpires" TEXT NOT NULL
); 
[INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Tracks" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Tracks" PRIMARY KEY,
    "TrackName" TEXT NOT NULL,
    "LastModifiedDate" TEXT NOT NULL,
    "CreatedDate" TEXT NOT NULL
); 
[INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Payments" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Payments" PRIMARY KEY,
    "PassengerId" TEXT NOT NULL,
    "Amount" TEXT NOT NULL,
    "TimeOfPayment" TEXT NOT NULL,
    "IsAprove" INTEGER NOT NULL,
    "LastModifiedDate" TEXT NOT NULL,
    "CreatedDate" TEXT NOT NULL,
    CONSTRAINT "FK_Payments_Passengers_PassengerId" FOREIGN KEY ("PassengerId") REFERENCES "Passengers" ("Id") ON DELETE CASCADE
); 
[INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Stations" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Stations" PRIMARY KEY,
    "StationName" TEXT NOT NULL,
    "TrainArriverTime" TEXT NOT NULL,
    "Index" INTEGER NOT NULL,
    "TrackId" TEXT NOT NULL,
    "Location" TEXT NOT NULL,
    "Amount" TEXT NOT NULL,
    "StationAdminId" TEXT NOT NULL,
    "DepartingTime" TEXT NOT NULL,
    "StationPhoneNo" TEXT NOT NULL,
    "LastModifiedDate" TEXT NOT NULL,
    "CreatedDate" TEXT NOT NULL,
    CONSTRAINT "FK_Stations_Staffs_StationAdminId" FOREIGN KEY ("StationAdminId") REFERENCES "Staffs" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_Stations_Tracks_TrackId" FOREIGN KEY ("TrackId") REFERENCES "Tracks" ("Id") ON DELETE CASCADE
); 
[INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Trains" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Trains" PRIMARY KEY,
    "Name" TEXT NOT NULL,
    "Capacity" INTEGER NOT NULL,
    "TrailEngineerId" TEXT NOT NULL,
    "TrackId" TEXT NOT NULL,
    "DepartedStationId" TEXT NOT NULL,
    "Delay" TEXT NOT NULL,
    "IsOnTrack" INTEGER NOT NULL,
    "TripDate" TEXT NOT NULL,
    "NTransitPassenge" INTEGER NOT NULL,
    "LastModifiedDate" TEXT NOT NULL,
    "CreatedDate" TEXT NOT NULL,
    CONSTRAINT "FK_Trains_Staffs_TrailEngineerId" FOREIGN KEY ("TrailEngineerId") REFERENCES "Staffs" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_Trains_Stations_DepartedStationId" FOREIGN KEY ("DepartedStationId") REFERENCES "Stations" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_Trains_Tracks_TrackId" FOREIGN KEY ("TrackId") REFERENCES "Tracks" ("Id") ON DELETE CASCADE
); 
[INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "BookedTrips" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_BookedTrips" PRIMARY KEY,
    "PickupStationId" TEXT NOT NULL,
    "DestinationStationId" TEXT NOT NULL,
    "TripDate" TEXT NOT NULL,
    "SettledTrip" INTEGER NOT NULL,
    "PassengerId" TEXT NOT NULL,
    "PaymentId" TEXT NOT NULL,
    "TrainId" TEXT NOT NULL,
    "NumberOfSeat" INTEGER NOT NULL,
    "LastModifiedDate" TEXT NOT NULL,
    "CreatedDate" TEXT NOT NULL,
    CONSTRAINT "FK_BookedTrips_Passengers_PassengerId" FOREIGN KEY ("PassengerId") REFERENCES "Passengers" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_BookedTrips_Payments_PaymentId" FOREIGN KEY ("PaymentId") REFERENCES "Payments" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_BookedTrips_Stations_DestinationStationId" FOREIGN KEY ("DestinationStationId") REFERENCES "Stations" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_BookedTrips_Stations_PickupStationId" FOREIGN KEY ("PickupStationId") REFERENCES "Stations" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_BookedTrips_Trains_TrainId" FOREIGN KEY ("TrainId") REFERENCES "Trains" ("Id") ON DELETE CASCADE
); 
[INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_BookedTrips_DestinationStationId" ON "BookedTrips" ("DestinationStationId"); 
[INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_BookedTrips_PassengerId" ON "BookedTrips" ("PassengerId"); 
[INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_BookedTrips_PaymentId" ON "BookedTrips" ("PaymentId"); 
[INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_BookedTrips_PickupStationId" ON "BookedTrips" ("PickupStationId"); 
[INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_BookedTrips_TrainId" ON "BookedTrips" ("TrainId"); 
[INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Passengers_Email" ON "Passengers" ("Email"); 
[INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Payments_PassengerId" ON "Payments" ("PassengerId"); 
[INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Staffs_Email" ON "Staffs" ("Email"); 
[INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Stations_StationAdminId" ON "Stations" ("StationAdminId"); 
[INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Stations_TrackId" ON "Stations" ("TrackId"); 
[INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Trains_DepartedStationId" ON "Trains" ("DepartedStationId"); 
[INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Trains_TrackId" ON "Trains" ("TrackId"); 
[INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Trains_TrailEngineerId" ON "Trains" ("TrailEngineerId"); 
[INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20220713174731_InitialMigration', '6.0.5'); 
[INF]  User profile is available. Using 'C:\Users\dell\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. 
[INF]  Now listening on: https://localhost:7247 
[INF]  Now listening on: http://localhost:5247 
[INF]  Application started. Press Ctrl+C to shut down. 
[INF]  Hosting environment: Development 
[INF]  Content root path: C:\Users\dell\Desktop\RailWayCleanArchitecture\RailWayTractingSystem\RailWayWebAPI\ 
[INF]  Request starting HTTP/2 GET https://localhost:7247/swagger/index.html - - 
[INF]  Request finished HTTP/2 GET https://localhost:7247/swagger/index.html - - - 200 - text/html;charset=utf-8 319.1708ms 
[INF]  Request starting HTTP/2 GET https://localhost:7247/_framework/aspnetcore-browser-refresh.js - - 
[INF]  Request finished HTTP/2 GET https://localhost:7247/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 7.3704ms 
[INF]  Request starting HTTP/2 GET https://localhost:7247/swagger/v1/swagger.json - - 
[INF]  Request finished HTTP/2 GET https://localhost:7247/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 263.3119ms 
[INF]  Request starting HTTP/2 POST https://localhost:7247/api/Passenger application/json 225 
[INF]  CORS policy execution successful. 
[INF]  Executing endpoint 'RailWayWebAPI.Controllers.PassengerController.CreatePassenger (RailWayWebAPI)' 
[INF]  Route matched with {action = "CreatePassenger", controller = "Passenger"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePassenger(RailWayAppLibrary.Commands.CreatePassenger) on controller RailWayWebAPI.Controllers.PassengerController (RailWayWebAPI). 
[INF]  Entity Framework Core 6.0.5 initialized 'RailWayDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.5' with options: None 
[INF]  Executed DbCommand (49ms) [Parameters=[@__ToLower_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Passengers" AS "p"
    WHERE lower("p"."Email") = @__ToLower_0) 
[INF]  Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 6), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (Size = 6), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime), @p8='?' (DbType = DateTime), @p9='?' (Size = 6), @p10='?' (Size = 6), @p11='?' (Size = 6), @p12='?' (DbType = Int32), @p13='?' (Size = 6), @p14='?' (Size = 64) (DbType = Binary), @p15='?' (Size = 128) (DbType = Binary), @p16='?' (Size = 6), @p17='?', @p18='?' (DbType = DateTime), @p19='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Passengers" ("Id", "Address", "BloodGroup", "CreatedDate", "Email", "Gender", "IsLock", "LastLogin", "LastModifiedDate", "NOK_Address", "NOK_Name", "NOK_PhoneNo", "NTry", "Name", "PasswordHash", "PasswordSalt", "PhoneNo", "RefreshToken", "TokenCreated", "TokenExpires")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19); 
[INF]  Executing OkObjectResult, writing value of type 'RailWayAppLibrary.Response.PassengerResponse'. 
[INF]  Executed action RailWayWebAPI.Controllers.PassengerController.CreatePassenger (RailWayWebAPI) in 4172.1334ms 
[INF]  Executed endpoint 'RailWayWebAPI.Controllers.PassengerController.CreatePassenger (RailWayWebAPI)' 
[INF]  Request finished HTTP/2 POST https://localhost:7247/api/Passenger application/json 225 - 200 - application/json;+charset=utf-8 4341.9631ms 
[INF]  User profile is available. Using 'C:\Users\dell\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. 
[INF]  Now listening on: https://localhost:7247 
[INF]  Now listening on: http://localhost:5247 
[INF]  Application started. Press Ctrl+C to shut down. 
[INF]  Hosting environment: Development 
[INF]  Content root path: C:\Users\dell\Desktop\RailWayCleanArchitecture\RailWayTractingSystem\RailWayWebAPI\ 
[INF]  Request starting HTTP/2 GET https://localhost:7247/swagger/index.html - - 
[INF]  Request finished HTTP/2 GET https://localhost:7247/swagger/index.html - - - 200 - text/html;charset=utf-8 285.5834ms 
[INF]  Request starting HTTP/2 GET https://localhost:7247/_framework/aspnetcore-browser-refresh.js - - 
[INF]  Request finished HTTP/2 GET https://localhost:7247/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 9.1058ms 
[INF]  Request starting HTTP/2 GET https://localhost:7247/swagger/v1/swagger.json - - 
[INF]  Request finished HTTP/2 GET https://localhost:7247/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 189.6289ms 
[INF]  Request starting HTTP/2 POST https://localhost:7247/api/Staff application/json 170 
[INF]  CORS policy execution successful. 
[INF]  Executing endpoint 'RailWayWebAPI.Controllers.StaffController.CreateStaff (RailWayWebAPI)' 
[INF]  Route matched with {action = "CreateStaff", controller = "Staff"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateStaff(RailWayAppLibrary.Commands.CreateStaff) on controller RailWayWebAPI.Controllers.StaffController (RailWayWebAPI). 
[INF]  Entity Framework Core 6.0.5 initialized 'RailWayDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.5' with options: None 
[INF]  Executed DbCommand (16ms) [Parameters=[@__ToLower_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Staffs" AS "s"
    WHERE lower("s"."Email") = @__ToLower_0) 
[INF]  Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 6), @p2='?' (DbType = DateTime), @p3='?' (Size = 6), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32), @p9='?' (Size = 6), @p10='?' (Size = 64) (DbType = Binary), @p11='?' (Size = 128) (DbType = Binary), @p12='?' (Size = 6), @p13='?', @p14='?' (Size = 5), @p15='?' (Size = 6), @p16='?' (DbType = DateTime), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Staffs" ("Id", "Address", "CreatedDate", "Email", "Gender", "IsLock", "LastLogin", "LastModifiedDate", "NTry", "Name", "PasswordHash", "PasswordSalt", "PhoneNo", "RefreshToken", "Role", "StaffId", "TokenCreated", "TokenExpires")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17); 
[INF]  Executing OkObjectResult, writing value of type 'RailWayAppLibrary.Response.StaffResponse'. 
[INF]  Executed action RailWayWebAPI.Controllers.StaffController.CreateStaff (RailWayWebAPI) in 2608.3341ms 
[INF]  Executed endpoint 'RailWayWebAPI.Controllers.StaffController.CreateStaff (RailWayWebAPI)' 
[INF]  Request finished HTTP/2 POST https://localhost:7247/api/Staff application/json 170 - 200 - application/json;+charset=utf-8 2751.2368ms 
[INF]  Request starting HTTP/2 POST https://localhost:7247/api/Staff/Login application/json 47 
[INF]  CORS policy execution successful. 
[INF]  Executing endpoint 'RailWayWebAPI.Controllers.StaffController.Login (RailWayWebAPI)' 
[INF]  Route matched with {action = "Login", controller = "Staff"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(RailWayAppLibrary.Queries.LoginStaff) on controller RailWayWebAPI.Controllers.StaffController (RailWayWebAPI). 
[INF]  Entity Framework Core 6.0.5 initialized 'RailWayDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.5' with options: None 
[INF]  Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Address", "s"."CreatedDate", "s"."Email", "s"."Gender", "s"."IsLock", "s"."LastLogin", "s"."LastModifiedDate", "s"."NTry", "s"."Name", "s"."PasswordHash", "s"."PasswordSalt", "s"."PhoneNo", "s"."RefreshToken", "s"."Role", "s"."StaffId", "s"."TokenCreated", "s"."TokenExpires"
FROM "Staffs" AS "s"
WHERE "s"."Email" = @__email_0
LIMIT 1 
[INF]  Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."Address", "s"."CreatedDate", "s"."Email", "s"."Gender", "s"."IsLock", "s"."LastLogin", "s"."LastModifiedDate", "s"."NTry", "s"."Name", "s"."PasswordHash", "s"."PasswordSalt", "s"."PhoneNo", "s"."RefreshToken", "s"."Role", "s"."StaffId", "s"."TokenCreated", "s"."TokenExpires"
FROM "Staffs" AS "s"
WHERE "s"."Id" = @__id_0
LIMIT 1 
[INF]  Executed DbCommand (31ms) [Parameters=[@p17='?' (DbType = Guid), @p0='?' (Size = 6), @p1='?' (DbType = DateTime), @p2='?' (Size = 6), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime), @p6='?' (DbType = DateTime), @p7='?' (DbType = Int32), @p8='?' (Size = 6), @p9='?' (Size = 64) (DbType = Binary), @p10='?' (Size = 128) (DbType = Binary), @p11='?' (Size = 6), @p12='?' (Size = 88), @p13='?' (Size = 5), @p14='?' (Size = 6), @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Staffs" SET "Address" = @p0, "CreatedDate" = @p1, "Email" = @p2, "Gender" = @p3, "IsLock" = @p4, "LastLogin" = @p5, "LastModifiedDate" = @p6, "NTry" = @p7, "Name" = @p8, "PasswordHash" = @p9, "PasswordSalt" = @p10, "PhoneNo" = @p11, "RefreshToken" = @p12, "Role" = @p13, "StaffId" = @p14, "TokenCreated" = @p15, "TokenExpires" = @p16
WHERE "Id" = @p17;
SELECT changes(); 
[INF]  Executing OkObjectResult, writing value of type 'System.String'. 
[INF]  Executed action RailWayWebAPI.Controllers.StaffController.Login (RailWayWebAPI) in 503.0498ms 
[INF]  Executed endpoint 'RailWayWebAPI.Controllers.StaffController.Login (RailWayWebAPI)' 
[INF]  Request finished HTTP/2 POST https://localhost:7247/api/Staff/Login application/json 47 - 200 - text/plain;+charset=utf-8 625.8789ms 
